{"version":3,"sources":["webpack:///main.js","webpack:///webpack/bootstrap edc278a0235cfdc1eb62","webpack:///./gameTickLoop.js","webpack:///./creepRoles/builder.js","webpack:///./creepRoles/harvester.js","webpack:///./creepRoles/upgrader.js","webpack:///./creepManagement/clearMemoryOfDeadCreeps.js","webpack:///./creepManagement/maintainSmallHarvesterPopulation.js","webpack:///./creepManagement/maintainSmallUpgraderPopulation.js"],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","loop","undefined","_harvester","_harvester2","_upgrader","_upgrader2","_builder","_builder2","_maintainSmallHarvesterPopulation","_maintainSmallHarvesterPopulation2","_maintainSmallUpgraderPopulation","_maintainSmallUpgraderPopulation2","_clearMemoryOfDeadCreeps","_clearMemoryOfDeadCreeps2","gameTickLoop","console","log","Game","time","structsArray","key","structures","push","tower","getObjectById","closestDamagedStructure","pos","findClosestByRange","FIND_STRUCTURES","filter","structure","hits","hitsMax","repair","closestHostile","FIND_HOSTILE_CREEPS","attack","creepNameKey","creeps","creep","memory","role","run","builderRole","building","carry","energy","carryCapacity","targets","room","find","FIND_CONSTRUCTION_SITES","length","build","ERR_NOT_IN_RANGE","moveTo","sources","FIND_SOURCES","harvest","roleHarvester","structureType","STRUCTURE_EXTENSION","STRUCTURE_SPAWN","STRUCTURE_TOWER","energyCapacity","transfer","RESOURCE_ENERGY","roleUpgrader","upgrading","upgradeController","controller","Memory","maintainSmallHarvesterPopulation","populationCap","harvesters","_","existingHarvesterIds","i","newHarvesterId","_i","j","newHarvester","spawns","spawn","createCreep","WORK","CARRY","MOVE","maintainSmallUpgraderPopulation","upgraders","existingUpgraderIds","newUpgraderId","newUpgrader"],"mappings":"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","file":"main.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.loop = undefined;\n\t\n\tvar _harvester = __webpack_require__(2);\n\t\n\tvar _harvester2 = _interopRequireDefault(_harvester);\n\t\n\tvar _upgrader = __webpack_require__(3);\n\t\n\tvar _upgrader2 = _interopRequireDefault(_upgrader);\n\t\n\tvar _builder = __webpack_require__(1);\n\t\n\tvar _builder2 = _interopRequireDefault(_builder);\n\t\n\tvar _maintainSmallHarvesterPopulation = __webpack_require__(5);\n\t\n\tvar _maintainSmallHarvesterPopulation2 = _interopRequireDefault(_maintainSmallHarvesterPopulation);\n\t\n\tvar _maintainSmallUpgraderPopulation = __webpack_require__(6);\n\t\n\tvar _maintainSmallUpgraderPopulation2 = _interopRequireDefault(_maintainSmallUpgraderPopulation);\n\t\n\tvar _clearMemoryOfDeadCreeps = __webpack_require__(4);\n\t\n\tvar _clearMemoryOfDeadCreeps2 = _interopRequireDefault(_clearMemoryOfDeadCreeps);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar gameTickLoop = function gameTickLoop() {\n\t  (0, _clearMemoryOfDeadCreeps2.default)();\n\t  console.log(\"Game.time:\", Game.time);\n\t  (0, _maintainSmallHarvesterPopulation2.default)(2);\n\t  (0, _maintainSmallUpgraderPopulation2.default)(2);\n\t\n\t  var structsArray = [];\n\t  for (var key in Game.structures) {\n\t    structsArray.push(Game.structures[key]);\n\t  }\n\t\n\t  var tower = Game.getObjectById(null);\n\t  if (tower) {\n\t    var closestDamagedStructure = tower.pos.findClosestByRange(FIND_STRUCTURES, {\n\t      filter: function filter(structure) {\n\t        return structure.hits < structure.hitsMax;\n\t      }\n\t    });\n\t    if (closestDamagedStructure) {\n\t      tower.repair(closestDamagedStructure);\n\t    }\n\t\n\t    var closestHostile = tower.pos.findClosestByRange(FIND_HOSTILE_CREEPS);\n\t    if (closestHostile) {\n\t      tower.attack(closestHostile);\n\t    }\n\t  }\n\t\n\t  for (var creepNameKey in Game.creeps) {\n\t    var creep = Game.creeps[creepNameKey];\n\t    if (creep.memory.role == 'harvester') {\n\t      _harvester2.default.run(creep);\n\t    }\n\t    if (creep.memory.role == 'upgrader') {\n\t      _upgrader2.default.run(creep);\n\t    }\n\t    if (creep.memory.role == 'builder') {\n\t      _builder2.default.run(creep);\n\t    }\n\t  }\n\t};\n\t\n\texports.loop = gameTickLoop;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar builderRole = {\n\t  /** @param {Creep} creep **/\n\t  run: function run(creep) {\n\t    if (creep.memory.building && creep.carry.energy == 0) {\n\t      creep.memory.building = false;\n\t    }\n\t    if (!creep.memory.building && creep.carry.energy == creep.carryCapacity) {\n\t      creep.memory.building = true;\n\t    }\n\t    if (creep.memory.building) {\n\t      var targets = creep.room.find(FIND_CONSTRUCTION_SITES);\n\t      if (targets.length) {\n\t        if (creep.build(targets[0]) == ERR_NOT_IN_RANGE) {\n\t          creep.moveTo(targets[0]);\n\t        }\n\t      }\n\t    } else {\n\t      var sources = creep.room.find(FIND_SOURCES);\n\t      if (creep.harvest(sources[0]) == ERR_NOT_IN_RANGE) {\n\t        creep.moveTo(sources[0]);\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\texports.default = builderRole;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar roleHarvester = {\n\t  /** @param {Creep} creep **/\n\t  run: function run(creep) {\n\t    if (creep.carry.energy < creep.carryCapacity) {\n\t      var sources = creep.room.find(FIND_SOURCES);\n\t      if (creep.harvest(sources[0]) == ERR_NOT_IN_RANGE) {\n\t        creep.moveTo(sources[0]);\n\t      }\n\t    } else {\n\t      var targets = creep.room.find(FIND_STRUCTURES, {\n\t        filter: function filter(structure) {\n\t          return (structure.structureType == STRUCTURE_EXTENSION || structure.structureType == STRUCTURE_SPAWN || structure.structureType == STRUCTURE_TOWER) && structure.energy < structure.energyCapacity;\n\t        }\n\t      });\n\t      if (targets.length > 0) {\n\t        if (creep.transfer(targets[0], RESOURCE_ENERGY) == ERR_NOT_IN_RANGE) {\n\t          creep.moveTo(targets[0]);\n\t        }\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\texports.default = roleHarvester;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar roleUpgrader = {\n\t  /** @param {Creep} creep **/\n\t  run: function run(creep) {\n\t    if (creep.memory.upgrading && creep.carry.energy == 0) {\n\t      creep.memory.upgrading = false;\n\t    }\n\t    if (!creep.memory.upgrading && creep.carry.energy == creep.carryCapacity) {\n\t      creep.memory.upgrading = true;\n\t    }\n\t\n\t    if (creep.memory.upgrading) {\n\t      if (creep.upgradeController(creep.room.controller) == ERR_NOT_IN_RANGE) {\n\t        creep.moveTo(creep.room.controller);\n\t      }\n\t    } else {\n\t      var sources = creep.room.find(FIND_SOURCES);\n\t      if (creep.harvest(sources[0]) == ERR_NOT_IN_RANGE) {\n\t        creep.moveTo(sources[0]);\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\texports.default = roleUpgrader;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function () {\n\t  for (var key in Memory.creeps) {\n\t    if (!Game.creeps[key]) {\n\t      delete Memory.creeps[key];\n\t      console.log('Clearing non-existing creep memory:', key);\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar maintainSmallHarvesterPopulation = function maintainSmallHarvesterPopulation(populationCap) {\n\t  var harvesters = _.filter(Game.creeps, function (creep) {\n\t    return creep.memory.role == 'harvester';\n\t  });\n\t\n\t  if (harvesters.length < populationCap || !harvesters) {\n\t    var existingHarvesterIds = [];\n\t    for (var i = 0; i < harvesters.length; i++) {\n\t      existingHarvesterIds.push(harvesters[i].memory.id);\n\t    }\n\t    var newHarvesterId = null;\n\t    for (var _i = 0; _i < populationCap; _i++) {\n\t      for (var j = 0; j < existingHarvesterIds.length; j++) {\n\t        console.log(\"looping\", _i);\n\t        if (_i !== existingHarvesterIds[j]) {\n\t          newHarvesterId = _i;\n\t        }\n\t      }\n\t    }\n\t    var newHarvester = Game.spawns.spawn.createCreep([WORK, CARRY, MOVE], \"harvester\" + newHarvesterId, { role: \"harvester\", id: newHarvesterId });\n\t    console.log(\"Spawning new harvester: \" + newHarvester);\n\t  }\n\t};\n\texports.default = maintainSmallHarvesterPopulation;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar maintainSmallUpgraderPopulation = function maintainSmallUpgraderPopulation(populationCap) {\n\t  var upgraders = _.filter(Game.creeps, function (creep) {\n\t    return creep.memory.role == 'upgrader';\n\t  });\n\t\n\t  if (upgraders.length < populationCap || !upgraders) {\n\t    var existingUpgraderIds = [];\n\t    for (var i = 0; i < upgraders.length; i++) {\n\t      existingUpgraderIds.push(upgraders[i].memory.id);\n\t    }\n\t    var newUpgraderId = null;\n\t    for (var _i = 0; _i < populationCap; _i++) {\n\t      for (var j = 0; j < existingUpgraderIds.length; j++) {\n\t        if (_i !== existingUpgraderIds[j]) newUpgraderId = _i;\n\t      }\n\t    }\n\t    var newUpgrader = Game.spawns.spawn.createCreep([WORK, CARRY, MOVE], \"upgrader\" + newUpgraderId, { role: \"upgrader\", id: newUpgraderId });\n\t    console.log(\"Spawning new upgrader: \" + newUpgrader);\n\t  }\n\t};\n\t\n\texports.default = maintainSmallUpgraderPopulation;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** main.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap edc278a0235cfdc1eb62\n **/","import roleHarvester from \"./creepRoles/harvester.js\";\nimport roleUpgrader from \"./creepRoles/upgrader.js\";\nimport roleBuilder from \"./creepRoles/builder.js\";\n\nimport maintainSmallHarvesterPopulation from \"./creepManagement/maintainSmallHarvesterPopulation.js\";\nimport maintainSmallUpgraderPopulation from \"./creepManagement/maintainSmallUpgraderPopulation.js\";\n\nimport clearMemoryOfDeadCreeps from \"./creepManagement/clearMemoryOfDeadCreeps.js\";\n\n\nconst gameTickLoop = () => {\n  clearMemoryOfDeadCreeps();\n  console.log(\"Game.time:\", Game.time);\n  maintainSmallHarvesterPopulation(2);\n  maintainSmallUpgraderPopulation(2);\n\n  let structsArray = [];\n  for (let key in Game.structures){\n    structsArray.push(Game.structures[key]);\n  }\n\n\n  var tower = Game.getObjectById(null);\n  if(tower) {\n    var closestDamagedStructure = tower.pos.findClosestByRange(FIND_STRUCTURES, {\n      filter: (structure) => structure.hits < structure.hitsMax\n    });\n    if(closestDamagedStructure) {\n      tower.repair(closestDamagedStructure);\n    }\n\n    var closestHostile = tower.pos.findClosestByRange(FIND_HOSTILE_CREEPS);\n    if(closestHostile) {\n      tower.attack(closestHostile);\n    }\n  }\n\n  for (let creepNameKey in Game.creeps) {\n    let creep = Game.creeps[creepNameKey];\n    if(creep.memory.role == 'harvester') {\n      roleHarvester.run(creep);\n    }\n    if(creep.memory.role == 'upgrader') {\n      roleUpgrader.run(creep);\n    }\n    if(creep.memory.role == 'builder') {\n      roleBuilder.run(creep);\n    }\n  }\n}\n\nexport {gameTickLoop as loop};\n\n\n/** WEBPACK FOOTER **\n ** ./gameTickLoop.js\n **/","const builderRole = {\n  /** @param {Creep} creep **/\n  run: function(creep) {\n    if(creep.memory.building && creep.carry.energy == 0) {\n      creep.memory.building = false;\n    }\n    if(!creep.memory.building && creep.carry.energy == creep.carryCapacity) {\n      creep.memory.building = true;\n    }\n    if(creep.memory.building) {\n      var targets = creep.room.find(FIND_CONSTRUCTION_SITES);\n      if(targets.length) {\n        if(creep.build(targets[0]) == ERR_NOT_IN_RANGE) {\n          creep.moveTo(targets[0]);\n        }\n      }\n    }\n    else {\n      var sources = creep.room.find(FIND_SOURCES);\n      if(creep.harvest(sources[0]) == ERR_NOT_IN_RANGE) {\n        creep.moveTo(sources[0]);\n      }\n    }\n  }\n};\n\nexport default builderRole;\n\n\n/** WEBPACK FOOTER **\n ** ./creepRoles/builder.js\n **/","var roleHarvester = {\n  /** @param {Creep} creep **/\n  run: function(creep) {\n    if(creep.carry.energy < creep.carryCapacity) {\n      var sources = creep.room.find(FIND_SOURCES);\n      if(creep.harvest(sources[0]) == ERR_NOT_IN_RANGE) {\n        creep.moveTo(sources[0]);\n      }\n    }\n    else {\n      var targets = creep.room.find(FIND_STRUCTURES, {\n        filter: (structure) => {\n          return (structure.structureType == STRUCTURE_EXTENSION ||\n            structure.structureType == STRUCTURE_SPAWN ||\n            structure.structureType == STRUCTURE_TOWER) && structure.energy < structure.energyCapacity;\n        }\n      });\n      if(targets.length > 0) {\n        if(creep.transfer(targets[0], RESOURCE_ENERGY) == ERR_NOT_IN_RANGE) {\n          creep.moveTo(targets[0]);\n        }\n      }\n    }\n  }\n};\n\nexport default roleHarvester;\n\n\n/** WEBPACK FOOTER **\n ** ./creepRoles/harvester.js\n **/","var roleUpgrader = {\n  /** @param {Creep} creep **/\n  run: function(creep) {\n    if(creep.memory.upgrading && creep.carry.energy == 0) {\n      creep.memory.upgrading = false;\n    }\n    if(!creep.memory.upgrading && creep.carry.energy == creep.carryCapacity) {\n      creep.memory.upgrading = true;\n    }\n\n    \n    if(creep.memory.upgrading) {\n      if(creep.upgradeController(creep.room.controller) == ERR_NOT_IN_RANGE) {\n        creep.moveTo(creep.room.controller);\n      }\n    }\n    else {\n      var sources = creep.room.find(FIND_SOURCES);\n      if(creep.harvest(sources[0]) == ERR_NOT_IN_RANGE) {\n        creep.moveTo(sources[0]);\n      }\n    }\n  }\n};\n\nexport default roleUpgrader;\n\n\n/** WEBPACK FOOTER **\n ** ./creepRoles/upgrader.js\n **/","export default () => {\n  for (let key in Memory.creeps){\n    if (!Game.creeps[key]){\n      delete Memory.creeps[key];\n      console.log('Clearing non-existing creep memory:', key);\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./creepManagement/clearMemoryOfDeadCreeps.js\n **/","const maintainSmallHarvesterPopulation = (populationCap) => {\n  const harvesters = _.filter(Game.creeps, creep => creep.memory.role == 'harvester');\n\n  if (harvesters.length < populationCap || !harvesters){\n    const existingHarvesterIds = []\n    for (let i = 0; i < harvesters.length; i++){\n      existingHarvesterIds.push(harvesters[i].memory.id)\n    }\n    let newHarvesterId = null;\n    for (let i = 0; i < populationCap; i++){\n      for (let j = 0; j < existingHarvesterIds.length; j++){\n        console.log(\"looping\", i)\n        if (i !== existingHarvesterIds[j]) {\n          newHarvesterId = i;\n        }\n      }\n    }\n    var newHarvester = Game.spawns.spawn.createCreep([WORK,CARRY,MOVE], (\"harvester\" + newHarvesterId), {role: \"harvester\", id: newHarvesterId});\n    console.log(\"Spawning new harvester: \" + newHarvester);\n  }\n}\nexport default maintainSmallHarvesterPopulation;\n\n\n/** WEBPACK FOOTER **\n ** ./creepManagement/maintainSmallHarvesterPopulation.js\n **/","const maintainSmallUpgraderPopulation = (populationCap) => {\n  const upgraders = _.filter(Game.creeps, creep => creep.memory.role == 'upgrader');\n\n  if(upgraders.length < populationCap || !upgraders) {\n    const existingUpgraderIds = []\n    for (let i = 0; i < upgraders.length; i++){\n      existingUpgraderIds.push(upgraders[i].memory.id)\n    }\n    let newUpgraderId = null;\n    for (let i = 0; i < populationCap; i++){\n      for (let j = 0; j < existingUpgraderIds.length; j++){\n        if (i !== existingUpgraderIds[j]) newUpgraderId = i;\n      }\n    }\n    var newUpgrader = Game.spawns.spawn.createCreep([WORK,CARRY,MOVE], (\"upgrader\" + newUpgraderId), {role: \"upgrader\", id: newUpgraderId});\n    console.log(\"Spawning new upgrader: \" + newUpgrader);\n  }\n}\n\nexport default maintainSmallUpgraderPopulation;\n\n\n/** WEBPACK FOOTER **\n ** ./creepManagement/maintainSmallUpgraderPopulation.js\n **/"],"sourceRoot":""}