module.exports=function(e){function r(n){if(o[n])return o[n].exports;var t=o[n]={exports:{},id:n,loaded:!1};return e[n].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var o={};return r.m=e,r.c=o,r.p="",r(0)}([function(e,r,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.loop=void 0;var t=o(2),a=n(t),u=o(3),i=n(u),l=o(1),s=n(l),c=o(5),f=n(c),d=o(6),m=n(d),p=o(4),v=n(p),g=function(){(0,v["default"])(),console.log("Game.time:",Game.time),(0,f["default"])(2),(0,m["default"])(2);var e=[];for(var r in Game.structures)e.push(Game.structures[r]);var o=Game.getObjectById(null);if(o){var n=o.pos.findClosestByRange(FIND_STRUCTURES,{filter:function(e){return e.hits<e.hitsMax}});n&&o.repair(n);var t=o.pos.findClosestByRange(FIND_HOSTILE_CREEPS);t&&o.attack(t)}for(var u in Game.creeps){var l=Game.creeps[u];"harvester"==l.memory.role&&a["default"].run(l),"upgrader"==l.memory.role&&i["default"].run(l),"builder"==l.memory.role&&s["default"].run(l)}};r.loop=g},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={run:function(e){if(e.memory.building&&0==e.carry.energy&&(e.memory.building=!1),e.memory.building||e.carry.energy!=e.carryCapacity||(e.memory.building=!0),e.memory.building){var r=e.room.find(FIND_CONSTRUCTION_SITES);r.length&&e.build(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0])}else{var o=e.room.find(FIND_SOURCES);e.harvest(o[0])==ERR_NOT_IN_RANGE&&e.moveTo(o[0])}}};r["default"]=o},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={run:function(e){if(e.carry.energy<e.carryCapacity){var r=e.room.find(FIND_SOURCES);e.harvest(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0])}else{var o=e.room.find(FIND_STRUCTURES,{filter:function(e){return(e.structureType==STRUCTURE_EXTENSION||e.structureType==STRUCTURE_SPAWN||e.structureType==STRUCTURE_TOWER)&&e.energy<e.energyCapacity}});o.length>0&&e.transfer(o[0],RESOURCE_ENERGY)==ERR_NOT_IN_RANGE&&e.moveTo(o[0])}}};r["default"]=o},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={run:function(e){if(e.memory.upgrading&&0==e.carry.energy&&(e.memory.upgrading=!1),e.memory.upgrading||e.carry.energy!=e.carryCapacity||(e.memory.upgrading=!0),e.memory.upgrading)e.upgradeController(e.room.controller)==ERR_NOT_IN_RANGE&&e.moveTo(e.room.controller);else{var r=e.room.find(FIND_SOURCES);e.harvest(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0])}}};r["default"]=o},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){for(var e in Memory.creeps)Game.creeps[e]||(delete Memory.creeps[e],console.log("Clearing non-existing creep memory:",e))}},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(e){var r=_.filter(Game.creeps,function(e){return"harvester"==e.memory.role});if(r.length<e||!r){for(var o=[],n=0;n<r.length;n++)o.push(r[n].memory.id);console.log("existingids",o);for(var t=0,a=0;a<e;a++)for(var u=0;u<o.length;u++)console.log("looping",a),a!==o[u]&&(t=a);console.log("newid",t);var i=Game.spawns.spawn.createCreep([WORK,CARRY,MOVE],"harvester"+t,{role:"harvester",id:t});console.log("Spawning new harvester: "+i)}};r["default"]=o},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(e){var r=_.filter(Game.creeps,function(e){return"upgrader"==e.memory.role});if(r.length<e||!r){for(var o=[],n=0;n<r.length;n++)o.push(r[n].memory.id);for(var t=0,a=0;a<e;a++)for(var u=0;u<o.length;u++)a!==o[u]&&(t=a);var i=Game.spawns.spawn.createCreep([WORK,CARRY,MOVE],"upgrader"+t,{role:"upgrader",id:t});console.log("Spawning new upgrader: "+i)}};r["default"]=o}]);
//# sourceMappingURL=main.js.map